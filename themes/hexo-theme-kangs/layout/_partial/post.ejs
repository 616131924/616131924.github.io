<style>
    .header-box {
        height: 370px;
        /* filter: blur(10px); */
        background-size: cover;
        background-color: lightsteelblue;
    }

    .post-box {
        padding: 15px;
        padding-top: 60px;
        min-height: 80vh;
        margin-top: -200px;
        border-radius: 4px;
        background-color: rgba(255,255,255,.8);
    }

    .post-avatar {
        height: 30px;
        width: 30px;
        border-radius: 50%;
    }

    .flow-chart {
        text-align: center;
    }

    img[alt="post-cover"] {
        display: none;
    }
</style>
<header>
    <div id="header_box" class="header-box"></div>
</header>
<section>
    <div class="container post-box">
        <div class="content post-title is-flex center flex-column" style="margin-bottom: 70px; overflow: auto;">
            <h1 class="has-text-centered" style="padding-bottom: 10px; border-bottom: 3px solid #fff">
                <strong><%- post.title || 'Null'%></strong>
            </h1>
            <% if (post.subtitle) {%>
                <h2><%- post.subtitle%></h2>
            <%}%>
            <div class="is-flex align-center">
                <img class="post-avatar" src="<%- theme.user_avatar %>">
                <span style="padding:0 10px;"> <span class="sub-title">By</span> <%- theme.user_name%></span>
                <span class="post-date sub-title">-- <%= post.date.format(config.date_format) %></span>
            </div>
            <% if(post.tags){%>
                <div>
                    <% post.tags.forEach(function(tag){%>
                         <a class="tag is-post-tag" href="<%- config.root + tag.path %>"><%- tag.name %></a>
                    <%})%>
                </div>
            <%}%>
        </div>
        <div class="content" style="overflow: auto">
            <%- post.content %>
        </div>
    </div>
</section>
<script>
    // 获取第一张图, 用以当封面背景图
    var img = document.querySelectorAll('img')[1]

    if (img) {
        var header_box = document.querySelector('#header_box')
        header_box.style.backgroundImage = 'url('+ img.src +')'
    }
</script>

<!-- for code block highlight --> 
<!-- theme.block_highlight -->
<!-- we do not guarantee the char sequences spell right, usr himself do it -->
<%- css('css/' + theme.block_highlight) %>
<script src="/js/highlight.min.js"></script>
<script type="text/javascript"> hljs.initHighlightingOnLoad();</script>
